<h1 id="hoofdstuk_3_cipher">Hoofdstuk 3: Cipher</h1>

<p>Al duizenden jaren proberen mensen elkaar berichten te versturen die niet door anderen mogen worden gelezen.</p>

<p>Een van de oudste manieren zou door Julius Caesar zelf zijn gebruikt en is redelijk eenvoudig. Hij schoof elke letter in een bericht een vast aantal plaatsen door in het alfabet. Dus hij maakte bijvoorbeeld van een ‘a’ een ‘d’, van een ‘b’ een ‘e’ etc. Met deze methode gaan we in deze opdracht aan de slag. Zie ook: <a href="http://en.wikipedia.org/wiki/Caesar_cipher">Caesar Cipher op wikipedia</a>.</p>

<h2 id="bestanden">Bestanden</h2>

<p><a href="/public/downloads/Hoofdstuk3.zip">Download hier de bestanden:</a></p>

<pre><code>Hoofstuk3.url - deze beschrijving
cipher.rb - het script waar je in gaat werken
cipher_test.rb - wat simpele tests
encrypted_message.txt - het versleutelde bestand met shift 12
secret.txt - voor de laatste opdracht</code></pre>

<h2 id="informatie">Informatie</h2>

<h3 id="arrays">Arrays</h3>

<p>Een <code>Array</code> is een geordende collectie.</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>namen</span> <span class='o'>=</span> <span class='o'>[</span><span class='s2'>&quot;Harrie&quot;</span><span class='p'>,</span> <span class='s2'>&quot;Maria&quot;</span><span class='p'>,</span> <span class='s2'>&quot;Evelien&quot;</span><span class='p'>,</span> <span class='s2'>&quot;Piet&quot;</span><span class='o'>]</span>
</code></pre></div>
<p>Je spreekt een voorwerp uit een array aan met de index. Het eerste voorwerp uit de array correspondeert met index 0.</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>namen</span><span class='o'>[</span><span class='mi'>0</span><span class='o'>]</span>    <span class='c1'># =&gt; &quot;Harrie&quot;</span>
<span class='n'>namen</span><span class='o'>[</span><span class='mi'>2</span><span class='o'>]</span>    <span class='c1'># =&gt; &quot;Evelien&quot;</span>
</code></pre></div>
<p>-1 correspondeert met het laatste element uit de array.</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>namen</span><span class='o'>[-</span><span class='mi'>1</span><span class='o'>]</span>   <span class='c1'># =&gt; &quot;Piet&quot;</span>
</code></pre></div>
<p>N.B. Je kunt ook strings op deze manier aanspreken!</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>naam</span> <span class='o'>=</span> <span class='s2'>&quot;Jan&quot;</span>
<span class='n'>naam</span><span class='o'>[</span><span class='mi'>0</span><span class='o'>]</span>     <span class='c1'># =&gt; &quot;J&quot;</span>
</code></pre></div>
<h3 id="for_loops">For Loops</h3>

<p>Als je een opdracht een vast aantal keer uit moet voeren, gebruik je een for loop. Stel dat je elk element uit een array wilt aanspreken:</p>
<div class='highlight'><pre><code class='ruby'><span class='k'>for</span> <span class='n'>naam</span> <span class='k'>in</span> <span class='n'>namen</span> <span class='k'>do</span>
    <span class='nb'>puts</span> <span class='s2'>&quot;Hallo, </span><span class='si'>#{</span><span class='n'>naam</span><span class='si'>}</span><span class='s2'>!&quot;</span>
<span class='k'>end</span>
<span class='c1'># =&gt; &quot;Hallo, Harrie!&quot;</span>
<span class='c1'># =&gt; &quot;Hallo, Maria!&quot;</span>
<span class='c1'># =&gt; &quot;Hallo, Evelien!&quot;</span>
<span class='c1'># =&gt; &quot;Hallo, Piet!&quot;</span>
</code></pre></div>
<p>Je kunt ook over een <em>range</em> itereren. Experimenteer met de volgende loops in <code>irb</code>.</p>
<div class='highlight'><pre><code class='ruby'><span class='k'>for</span> <span class='n'>number</span> <span class='k'>in</span> <span class='p'>(</span><span class='mi'>0</span><span class='o'>.</span><span class='n'>.</span><span class='mi'>100</span><span class='p'>)</span> <span class='k'>do</span>
    <span class='nb'>puts</span> <span class='n'>number</span>
<span class='k'>end</span>

<span class='k'>for</span> <span class='n'>letter</span> <span class='k'>in</span> <span class='p'>(</span><span class='s2'>&quot;a&quot;</span><span class='o'>.</span><span class='n'>.</span><span class='o'>.</span><span class='s2'>&quot;z&quot;</span><span class='p'>)</span>
    <span class='nb'>puts</span> <span class='n'>letter</span>
<span class='k'>end</span>
</code></pre></div>
<p>Wat is het verschil tussen <code>(0..10)</code> en <code>(0...10)</code>?</p>

<h3 id="hashes">Hashes</h3>

<p>Een <code>Hash</code> lijkt op een array, maar je spreekt een waarde uit de collectie niet aan met een index, maar met een <em>key</em>. Een key kan van elk datatype zijn. De volgende hash verbindt landen met hun hoofdsteden:</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>hoofdsteden</span> <span class='o'>=</span> <span class='p'>{</span>
    <span class='s2'>&quot;Nederland&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;Amsterdam&quot;</span><span class='p'>,</span>
    <span class='s2'>&quot;Frankrijk&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;Parijs&quot;</span><span class='p'>,</span>
    <span class='s2'>&quot;Slowakije&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;Bratislava&quot;</span>
    <span class='p'>}</span>

<span class='n'>hoofdsteden</span><span class='o'>[</span><span class='s2'>&quot;Nederland&quot;</span><span class='o'>]</span>    <span class='c1'># =&gt; &quot;Amsterdam&quot;   </span>
</code></pre></div>
<p><code>&quot;Nederland&quot;</code> en <code>&quot;Amsterdam&quot;</code> worden samen een <em>key, value pair</em> genoemd.</p>

<h3 id="file_inputoutput">File Input/Output</h3>

<p>Stel dat je <code>bericht.txt</code> wilt inlezen. Dat gaat als volgt:</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>contents</span> <span class='o'>=</span> <span class='no'>File</span><span class='o'>.</span><span class='n'>read</span><span class='p'>(</span><span class='s1'>&#39;bericht.txt&#39;</span><span class='p'>)</span>
</code></pre></div>
<p><code>contents</code> is nu een (hele lange) string.</p>

<p>Naar bestanden schrijven kan ook.</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>file</span> <span class='o'>=</span> <span class='no'>File</span><span class='o'>.</span><span class='n'>open</span><span class='p'>(</span><span class='s2'>&quot;test.txt&quot;</span><span class='p'>,</span> <span class='s2'>&quot;w&quot;</span><span class='p'>)</span>
<span class='n'>file</span><span class='o'>.</span><span class='n'>write</span><span class='p'>(</span><span class='s2'>&quot;hallo!&quot;</span><span class='p'>)</span>
<span class='n'>file</span><span class='o'>.</span><span class='n'>close</span>
</code></pre></div>
<h3 id="ruby_documentation">Ruby Documentation</h3>

<p>Nu jullie een aantal basisbegrippen hebben leren kennen, moeten jullie de documentatie van de ruby-taal leren lezen. Ook wij zoeken nog dagelijks dingen op.</p>

<ul>
<li><a href="http://www.ruby-doc.org/core-1.9.3/String.html">http://www.ruby-doc.org/core-1.9.3/String.html</a></li>

<li><a href="http://www.ruby-doc.org/core-1.9.3/Array.html">http://www.ruby-doc.org/core-1.9.3/Array.html</a></li>

<li><a href="http://www.ruby-doc.org/core-1.9.3/Hash.html">http://www.ruby-doc.org/core-1.9.3/Hash.html</a></li>
</ul>

<p>De volgende functies kunnen van pas komen:</p>

<ul>
<li><code>String#split</code></li>

<li><code>Array#join</code></li>
</ul>

<p><code>String#split</code> betekent: de functie <code>split</code> die hoort bij <code>String</code>. Gebruik de bovenstaande documentatie (of gebruik google) om uit te vinden hoe je <code>split</code> en <code>join</code> gebruikt.</p>

<h2 id="de_opdracht">De opdracht</h2>

<h3 id="de_functie_">De functie <code>build_cipher</code></h3>

<p>In deze opdracht ga je de computer inzetten om berichten te versleutelen en weer te ontcijferen. Hiervoor zul je een aantal functies moeten schrijven. Begin bij een functie <code>build_cipher</code>, die met een gegeven <em>shift</em> (het aantal plaatsen dat elke letter moet worden verschoven) een hash aanmaakt.<br />In deze hash moet elke letter in het alfabet gekoppeld worden aan de letter waar hij door vervangen moet worden. We vatten de spatie <code>&quot; &quot;</code> op als 27e letter. Een shift van 3 zou moeten opleveren:</p>
<div class='highlight'><pre><code class='ruby'><span class='p'>{</span>
 <span class='s2'>&quot;a&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;d&quot;</span><span class='p'>,</span> <span class='s2'>&quot;b&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;e&quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;c&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;f&quot;</span><span class='p'>,</span> <span class='s2'>&quot;d&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;g&quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;e&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;h&quot;</span><span class='p'>,</span> <span class='s2'>&quot;f&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;i&quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;g&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;j&quot;</span><span class='p'>,</span> <span class='s2'>&quot;h&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;k&quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;i&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;l&quot;</span><span class='p'>,</span> <span class='s2'>&quot;j&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;m&quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;k&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;n&quot;</span><span class='p'>,</span> <span class='s2'>&quot;l&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;o&quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;m&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;p&quot;</span><span class='p'>,</span> <span class='s2'>&quot;n&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;q&quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;o&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;r&quot;</span><span class='p'>,</span> <span class='s2'>&quot;p&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;s&quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;q&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;t&quot;</span><span class='p'>,</span> <span class='s2'>&quot;r&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;u&quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;s&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;v&quot;</span><span class='p'>,</span> <span class='s2'>&quot;t&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;w&quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;u&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;x&quot;</span><span class='p'>,</span> <span class='s2'>&quot;v&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;y&quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;w&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;z&quot;</span><span class='p'>,</span> <span class='s2'>&quot;x&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot; &quot;</span><span class='p'>,</span>
 <span class='s2'>&quot;y&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;a&quot;</span><span class='p'>,</span> <span class='s2'>&quot;z&quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;b&quot;</span><span class='p'>,</span> 
 <span class='s2'>&quot; &quot;</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;c&quot;</span>
<span class='p'>}</span>
</code></pre></div>
<p>Je ziet hier dat de “a” drie plaatsen is opgeschoven en in het gecodeerde bericht een “d” wordt.</p>

<h3 id="de_functie__2">De functie <code>encrypt</code></h3>

<p>Dit is de functie waar het allemaal om draait. Als je deze functie een bericht en een bepaalde shift geeft, zou het de build_cipher-functie moeten aanroepen en dan vervolgens het bericht letter <em>voor</em> letter (denk hierbij aan een <code>for</code>loop) moeten coderen tot tekst waar je niks zinnigs meer in ziet.</p>

<h3 id="de_functie__3">De functie <code>decrypt</code></h3>

<p>Als je iets codeert, wil je het natuurlijk ook weer terug kunnen vertalen. Hiervoor heb je deze functie nodig. We gaan er hier van uit dat je de ‘sleutel’ (dus de shift) weet. Denk goed na, je hoeft hiervoor niet veel nieuwe code te schrijven!</p>

<h2 id="het_bestand_ontcijferen">Het bestand ontcijferen</h2>

<p>Je hebt nu alles gemaakt om het bestand <code>encrypted_message.txt</code> te gaan ontcijferen. Lees het bestand in, draai het in zijn geheel door de <code>decrypt</code> functie en sla het ontcijferde stuk tekst op in <code>decrypted_message.txt</code>.</p>

<h3 id="extra_hoofdletters_getallen_en_leestekens">(Extra) Hoofdletters, getallen en leestekens</h3>

<p>Je programma kan nu allerlei stukken tekst, zo lang als je maar wilt, versleutelen en weer decoderen. Maar hoofdletters, getallen en leestekens coderen lukt nog niet. Verzin hier iets op! Als je bepaalde karakters hetzelfde wilt houden (bijvoorbeeld leestekens), komt de functie <code>Hash#fetch</code> goed van pas.</p>

<p>Met de nieuwe <code>build_cipher</code> werken de tests niet meer. Als je het leuk vindt, kun je <a href="http://mattsears.com/articles/2011/12/10/minitest-quick-reference">hier</a> vinden hoe je tests schrijft met <code>minitest</code>, één van de vele <em>test frameworks</em> in Ruby.</p>

<h3 id="extra_geheim_bericht_kraken">(Extra) Geheim bericht kraken</h3>

<p>Nu gaan jullie een bericht ontcijferen! Hoe zou je dit doen?</p>

<p>Je kunt alle mogelijkheden langsgaan. Deze methode heet <em>brute force</em>. Of is er een slimmere manier?</p>

<p>Het bericht staat in het bestand <code>secret.txt</code>.</p>